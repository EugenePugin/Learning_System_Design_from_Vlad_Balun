Задание:
- разработать system design Яндекс Такси

Решение:
1) [The board]
	(https://us04web.zoom.us/wb/db/dfS_IhP9T6-dlHA8RqKhzQ/p/189042805309440)
	[The PDF file](https://github.com/EugenePugin/Learning_System_Design_from_Vlad_Balun/blob/main/Яндекс%20Такси/System%20Design%20Yandex%20Taxi%20-%20board%20view.pdf)
	[The architecture as a code]
	()
	
	
2) System Design:

Функциональные требования:
- юзер может добавлять в друзья другого юзера
- юзер может принимать/отклонять запрос на прием в друзья
- юзер может создавать сообщества и приглашать в них других юзеров
- юзер может принимать/отклонять запрос на прием в сообщество
- юзер может отправлять текст и фото в сообщениях другому юзеру
- юзер может отправлять текст и фото в сообщества, где он состоит
- ВНЕ СКОУПА: 
	отправка видео, видео звонки
Нефункциональные требования:
- DAU	100M юзеров
- availability 99.95%
- response time на отправку 1 секунд, на получение 5 секунд
- поддерживаем только СНГ
- юзер в среднем пишет 2 сообщения в день, читает 10 сообщений
- юзер в среднем делает 1 пост в неделю, читает 10 постов
- макс размер сообщения 1000 символов, макс размер фото 1Mb

2) 
a) размер БД для хранения сообщений на 5 лет:

RPS to read msgs = DAU * avg_reads / time =
		= 100M * 10 / 24*3600 = 12 krps
 RPS to read posts = DAU * avg_post_reads / time = .. negligible

Traffic of reads = RPS * msg_size = 
		= 12k rps * (10*2*1000 + 10*1Mb) = 12k * 11Mb = 132 gb/s
		// 2bytes to code 1 RU symbol
Traffic of writes = Traffic of reads/5 = 27 gb/s

Storage size to keep all written msgs for 5 years:
		= Traffic of writes*2*2*3600*24*365 = 3405 pb
		// 2 - replication factor
		// 2 - db backups
		
b) рассчитать входной траффик на создание постов:
	RPS to write posts = DAU * avg_posts_writes / time =
		= 100M * 1 / 3600*24*7 = 165 rps
	Traffic of writes_posts = RPS to write posts*avg_post_size = 
		= 165 * (2*1000 + 1Mb) = 165 mps

c) количество дисков для хранения данных на 5 лет
	disk_count = Storage size to keep all written msgs for 5 years / disk_capacity
		= 3405 pb / 30tb = 113k disks
		// taking 30Tb as the disk used
		
d) RPS по созданию/чтению постов
	RPS to write posts = 165 rps 	// see b) above
	RPS to read posts = 10* RPS to write posts = 1.6 krps